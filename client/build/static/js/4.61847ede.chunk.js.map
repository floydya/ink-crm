{"version":3,"sources":["shared/utils/api.js","shared/hooks/mergeState.js","shared/hooks/api/query.js","shared/hooks/api/mutation.js","shared/hooks/api/index.js","pages/Authentication/Styles.js","store/actions/authentication.actions.js","shared/hooks/currentUser.js","store/actions/index.js","shared/utils/url.js","layout/Styles.js","shared/utils/queryParamModal.js","pages/Records/Create/index.jsx","App.jsx"],"names":["getAuthenticationToken","localStorage","getItem","api","method","url","variables","Promise","resolve","reject","axios","create","headers","Authorization","undefined","instance","process","params","data","paramsSerializer","objectToQueryString","then","response","error","status","removeItem","code","message","get","args","post","put","patch","delete","useMergeState","initialState","useState","state","setState","useCallback","newState","isFunction","currentState","cache","useQuery","propsVariables","options","lazy","cachePolicy","mountFetch","wasCalled","useRef","propsVariablesMemoized","useDeepCompareMemoize","isSleeping","current","isCacheAvailable","isEqual","apiVariables","canUseCache","isLoading","mergeState","makeRequest","newVariables","finally","useEffect","setLocalData","getUpdatedData","updatedData","clearData","isWorkingAlias","useMutation","isWorking","Container","styled","div","FormWrapper","FormElement","Form","Element","FormHeading","font","size","Divider","props","withBottomMargin","color","borderLightest","Actions","ActionButton","Button","logoutUser","type","authenticationConstants","LOGOUT_USER","loginUser","token","LOGIN_USER","payload","fetchUser","user","FETCH_USER","setParlor","parlor","SET_PARLOR","useCurrentProfile","useContext","AuthenticationContext","useMemo","profile","find","el","id","queryStringToObject","str","queryString","parse","arrayFormat","obj","stringify","omitFromQueryString","keys","omit","addToQueryString","fields","paddingLeft","sizes","appNavBarLeftWidth","secondarySideBarWidth","ProjectPage","createQueryParamModalHelpers","param","open","history","push","pathname","location","search","close","isOpen","CreateRecord","customerId","useParams","useApi","isCreating","createRecord","sessionTypes","employees","types","map","label","name","value","filteredEmployees","role_display","full_name","session_types","session_motivations","console","log","validations","is","required","datetime","performer","initialValues","moment","add","approximate_time","comment","sketch","prepayment","onSubmit","values","form","a","files","length","getBase64","customer","formData","handleAPIError","Field","Select","DatePicker","filter","option","formValues","Input","Textarea","FileInput","variant","HomePage","React","NavbarLeft","Sidebar","Notifications","Settings","Profile","Motivation","Employees","CustomerCreate","CustomerCreateForm","CustomerDetail","App","useLocation","notificationsModalHelpers","settingsModalHelpers","dispatch","isAuthenticated","loggedIn","pubsub","on","off","authenticationActions","notificationsModalOpen","settingsModalOpen","testid","width","onClose","renderContent","$scrollOverlayRef","$clickableOverlayRef","withCloseIcon","modal","modalClose","Suspense","fallback","path","render","exact","Create","to"],"mappings":"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","file":"static/js/4.61847ede.chunk.js","sourcesContent":["import axios from \"axios\"\nimport { objectToQueryString } from \"./url\"\n\nconst getAuthenticationToken = () => localStorage.getItem(\"token\") || null\n\nconst api = (method, url, variables) => {\n  return new Promise((resolve, reject) => {\n    const instance = axios.create({\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: getAuthenticationToken() ? `Bearer ${getAuthenticationToken()}` : undefined\n      }\n    })\n    instance({\n      url: `${process.env.REACT_APP_API_HTTP_URL}${url}`,\n      method,\n      params: method === \"get\" ? variables : undefined,\n      data: method !== \"get\" ? variables : undefined,\n      paramsSerializer: objectToQueryString\n    }).then(response => {\n      resolve(response.data)\n    }, error => {\n      if (error.response) {\n        if (error.response.status === 401) {\n          localStorage.removeItem(\"token\")\n          // pubsub logout\n          // store.dispatch(authenticationActions.logoutUser())\n        } else {\n          reject(error.response)\n        }\n      } else {\n        reject({\n          code: \"INTERNAL_ERROR\",\n          message: \"Something went wrong. Please check your internet connection or contact our support.\",\n          status: 503,\n          data: {}\n        })\n      }\n    })\n  })\n}\n\nexport default {\n  get: (...args) => api(\"get\", ...args),\n  post: (...args) => api(\"post\", ...args),\n  put: (...args) => api(\"put\", ...args),\n  patch: (...args) => api(\"patch\", ...args),\n  delete: (...args) => api(\"delete\", ...args)\n}","import { useState, useCallback } from \"react\"\nimport { isFunction } from \"lodash\"\n\nconst useMergeState = initialState => {\n  const [state, setState] = useState(initialState || {})\n\n  const mergeState = useCallback(newState => {\n    if (isFunction(newState)) {\n      setState(currentState => ({ ...currentState, ...newState(currentState) }))\n    } else {\n      setState(currentState => ({ ...currentState, ...newState }))\n    }\n  }, [])\n\n  return [state, mergeState]\n}\n\nexport default useMergeState","import { useRef, useCallback, useEffect } from \"react\"\nimport { isEqual } from \"lodash\"\n\nimport api from \"../../utils/api\"\nimport useMergeState from \"../mergeState\"\nimport useDeepCompareMemoize from \"../deepCompareMemoize\"\n\nconst useQuery = (url, propsVariables = {}, options = {}) => {\n  const { lazy = false, cachePolicy = \"cache-first\", mountFetch = false } = options\n\n  const wasCalled = useRef(false)\n  const propsVariablesMemoized = useDeepCompareMemoize(propsVariables)\n\n  const isSleeping = lazy && !wasCalled.current\n  const isCacheAvailable = cache[url] && isEqual(cache[url].apiVariables, propsVariables)\n  const canUseCache = isCacheAvailable && cachePolicy !== \"no-cache\" && !wasCalled.current\n\n  const [state, mergeState] = useMergeState({\n    data: canUseCache ? cache[url].data : null,\n    error: null,\n    isLoading: !lazy && !canUseCache,\n    variables: {}\n  })\n\n  const makeRequest = useCallback(\n    newVariables => {\n      const variables = { ...state.variables, ...(newVariables || {}) }\n      const apiVariables = { ...propsVariablesMemoized, ...variables }\n\n      const skipLoading = canUseCache && cachePolicy === \"cache-first\"\n\n      if (!skipLoading) {\n        mergeState({ isLoading: true, variables })\n      } else if (newVariables) {\n        mergeState({ variables })\n      }\n\n      return api.get(url, apiVariables).then(\n        data => {\n          cache[url] = { data, apiVariables }\n          mergeState({ data, error: null, isLoading: false })\n          return data\n        },\n        error => {\n          mergeState({ error, data: null, isLoading: false })\n        }\n      ).finally(() => {\n        wasCalled.current = true\n      })\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [url, propsVariablesMemoized]\n  )\n\n  useEffect(() => {\n    if (isSleeping) return\n    if (canUseCache && cachePolicy === \"cache-only\") return\n    if (mountFetch) makeRequest()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [makeRequest])\n\n  const setLocalData = useCallback(\n    getUpdatedData =>\n      mergeState(({ data }) => {\n        const updatedData = getUpdatedData(data)\n        cache[url] = { ...(cache[url] || {}), data: updatedData }\n        return { data: updatedData }\n      }),\n    [mergeState, url]\n  )\n\n  const clearData = useCallback(() => mergeState({ data: null }), [mergeState])\n\n  return [\n    {\n      ...state,\n      variables: { ...propsVariablesMemoized, ...state.variables },\n      setLocalData,\n      clearData\n    },\n    makeRequest\n  ]\n}\n\nconst cache = {}\n\nexport default useQuery","import { useCallback } from 'react';\n\nimport api from '../../utils/api';\nimport useMergeState from '../mergeState';\n\nconst useMutation = (method, url) => {\n  const [state, mergeState] = useMergeState({\n    data: null,\n    error: null,\n    isWorking: false,\n  });\n\n  const makeRequest = useCallback(\n    (variables = {}) =>\n      new Promise((resolve, reject) => {\n        mergeState({ isWorking: true });\n\n        api[method](url, variables).then(\n          data => {\n            resolve(data);\n            mergeState({ data, error: null, isWorking: false });\n          },\n          error => {\n            reject(error);\n            mergeState({ error, data: null, isWorking: false });\n          },\n        );\n      }),\n    [method, url, mergeState],\n  );\n\n  return [\n    {\n      ...state,\n      [isWorkingAlias[method]]: state.isWorking,\n    },\n    makeRequest,\n  ];\n};\n\nconst isWorkingAlias = {\n  post: 'isCreating',\n  put: 'isUpdating',\n  patch: 'isUpdating',\n  delete: 'isDeleting',\n};\n\nexport default useMutation;","import useQuery from \"./query\"\nimport useMutation from \"./mutation\"\n\n/* eslint-disable react-hooks/rules-of-hooks */\nexport default {\n  get: (...args) => useQuery(...args),\n  post: (...args) => useMutation(\"post\", ...args),\n  put: (...args) => useMutation(\"put\", ...args),\n  patch: (...args) => useMutation(\"patch\", ...args),\n  delete: (...args) => useMutation(\"delete\", ...args)\n}\n","import styled from 'styled-components';\n\nimport { color, font } from '../../shared/utils/styles';\nimport { Button, Form } from '../../shared/components';\n\nexport const Container = styled.div`\n  width: 100vw;\n  min-height: 100vh;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  padding: 15px; \n`\n\nexport const FormWrapper = styled.div`\n  width: 390px;\n  position: relative;\n  padding-bottom: 90px;\n  padding-top: 50px;\n`\n\nexport const FormElement = styled(Form.Element)`\n  padding: 25px 40px 35px;\n`;\n\nexport const FormHeading = styled.div`\n  padding-bottom: 15px;\n  ${font.size(21)}\n`;\n\nexport const SelectItem = styled.div`\n  display: flex;\n  align-items: center;\n  margin-right: 15px;\n  ${props => props.withBottomMargin && `margin-bottom: 5px;`}\n`;\n\nexport const SelectItemLabel = styled.div`\n  padding: 0 3px 0 6px;\n`;\n\nexport const Divider = styled.div`\n  margin-top: 22px;\n  border-top: 1px solid ${color.borderLightest};\n`;\n\nexport const Actions = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 30px;\n`;\n\nexport const ActionButton = styled(Button)`\n  margin-left: 10px;\n`;","import { authenticationConstants } from \"../constants\"\n\nexport const loginUser = token => ({\n  type: authenticationConstants.LOGIN_USER,\n  payload: token\n})\n\nexport const fetchUser = user => ({\n  type: authenticationConstants.FETCH_USER,\n  payload: user\n})\n\nexport const logoutUser = () => ({\n  type: authenticationConstants.LOGOUT_USER\n})\n\nexport const setParlor = (parlor) => ({\n  type: authenticationConstants.SET_PARLOR,\n  payload: parlor\n})\n\nexport default { loginUser, fetchUser, logoutUser, setParlor }\n","import { useContext, useMemo } from \"react\"\nimport { AuthenticationContext } from \"../../services/authentication.service\"\n\nexport const useCurrentProfile = () => {\n  const { user, parlor } = useContext(AuthenticationContext)\n  return useMemo(\n    () => user?.profile?.find(el => el.parlor.id === parlor),\n    [user, parlor]\n  )\n}","export { default as authenticationActions } from \"./authentication.actions\"","import queryString from 'query-string';\nimport { omit } from 'lodash';\n\nexport const queryStringToObject = (str, options = {}) =>\n  queryString.parse(str, {\n    arrayFormat: 'bracket',\n    ...options,\n  });\n\nexport const objectToQueryString = (obj, options = {}) =>\n  queryString.stringify(obj, {\n    arrayFormat: 'bracket',\n    ...options,\n  });\n\nexport const omitFromQueryString = (str, keys) =>\n  objectToQueryString(omit(queryStringToObject(str), keys));\n\nexport const addToQueryString = (str, fields) =>\n  objectToQueryString({\n    ...queryStringToObject(str),\n    ...fields,\n  });","import styled from 'styled-components';\n\nimport { sizes } from '../shared/utils/styles';\n\nconst paddingLeft = sizes.appNavBarLeftWidth + sizes.secondarySideBarWidth + 40;\n\nexport const ProjectPage = styled.div`\n  padding: 25px 32px 50px ${paddingLeft}px;\n  height: 100%;\n  overflow-y: auto;\n  @media (max-width: 1100px) {\n    padding: 25px 20px 50px ${paddingLeft - 20}px;\n  }\n  @media (max-width: 999px) {\n    padding-left: ${paddingLeft - 20 - sizes.secondarySideBarWidth}px;\n  }\n`;","import history from \"../../history\"\nimport { queryStringToObject, addToQueryString, omitFromQueryString } from \"../utils/url\"\n\nconst open = param =>\n  history.push({\n    pathname: history.location.pathname,\n    search: addToQueryString(history.location.search, { [`modal-${param}`]: true })\n  })\n\nconst close = param =>\n  history.push({\n    pathname: history.location.pathname,\n    search: omitFromQueryString(history.location.search, [`modal-${param}`])\n  })\n\nconst isOpen = param => !!queryStringToObject(history.location.search)[`modal-${param}`]\n\nexport const createQueryParamModalHelpers = param => ({\n  open: () => open(param),\n  close: () => close(param),\n  isOpen: () => isOpen(param)\n})\n","import React, { useMemo } from \"react\"\nimport { useParams } from \"react-router-dom\"\nimport { useCurrentProfile } from \"../../../shared/hooks/currentUser\"\nimport { Form } from \"../../../shared/components\"\nimport { ActionButton, Actions, FormElement, FormHeading } from \"../../Authentication/Styles\"\nimport useApi from \"../../../shared/hooks/api\"\nimport moment from \"moment\"\nimport { getBase64 } from \"../../../shared/utils/base64\"\nimport history from \"../../../history\"\n\nconst CreateRecord = () => {\n  const { customerId } = useParams()\n  const profile = useCurrentProfile()\n  const [{isCreating}, createRecord] = useApi.post(`/records/`)\n  const [{ data: sessionTypes }] = useApi.get(`/types/sessions/`, {}, { mountFetch: true })\n  const [{ data: employees }] = useApi.get(`/profiles/`, { parlor: profile?.parlor?.id }, { mountFetch: true })\n  const types = useMemo(\n    () => (sessionTypes || []).map(el => ({ label: el.name, value: el.id })),\n    [sessionTypes]\n  )\n  const filteredEmployees = useMemo(\n    () => (employees || [])\n      .map(el => ({\n        label: `[${el.role_display}] ${el.user.full_name}`,\n        value: el.id,\n        session_types: el.session_motivations.map(el => el.id)\n      })),\n    [employees]\n  )\n  console.log(employees)\n  return <div>\n    <Form\n      validations={{\n        type: Form.is.required(),\n        datetime: Form.is.required(),\n        performer: Form.is.required()\n      }}\n      initialValues={{\n        type: \"\",\n        datetime: moment().add(5, \"minutes\"),\n        performer: \"\",\n        approximate_time: \"\",\n        comment: \"\",\n        sketch: \"\",\n        prepayment: \"\",\n      }}\n      onSubmit={async (values, form) => {\n        const formData = {\n          ...values,\n          type: values.type,\n          datetime: values.datetime,\n          performer: values.performer,\n          approximate_time: values.approximate_time || null,\n          prepayment: values.prepayment || null,\n          ...values.sketch.files.length && {sketch: await getBase64(values.sketch.files[0])},\n          customer: customerId,\n          parlor: profile.parlor.id,\n        }\n        try {\n          const response = await createRecord(formData)\n          await history.push(`/records/${response.id}`)\n        } catch (error) {\n          Form.handleAPIError(error, form)\n        }\n      }}\n    >\n      <FormElement>\n        <FormHeading>Создание записи</FormHeading>\n        <Form.Field.Select name=\"type\" label=\"Тип сеанса\" options={types} />\n        <Form.Field.DatePicker name=\"datetime\" label=\"Дата\" />\n        <Form.Field.Select name=\"performer\" label=\"Мастер\" options={filteredEmployees} filter={\n          (option, formValues) => option.session_types.find(el => el === formValues.type)\n        }/>\n        <Form.Field.Input name=\"approximate_time\" label=\"Примерное время на сеанс\" type=\"time\" />\n        <Form.Field.Textarea name=\"comment\" label=\"Комментарий\" />\n        <Form.Field.Input name=\"prepayment\" label=\"Предоплата\" type=\"number\" />\n        <Form.Field.FileInput name=\"sketch\" label=\"Эскиз\" />\n        <Actions>\n          <ActionButton type=\"submit\" variant=\"primary\" isWorking={isCreating}>\n            Создать\n          </ActionButton>\n        </Actions>\n      </FormElement>\n    </Form>\n  </div>\n}\n\nexport default CreateRecord\n","import React, { useContext, useEffect } from \"react\"\nimport { Route, Redirect, Switch, useLocation } from \"react-router-dom\"\nimport { ProjectPage } from \"./layout/Styles\"\nimport useApi from \"./shared/hooks/api\"\nimport { PageLoader, Modal } from \"./shared/components\"\nimport { authenticationActions } from \"./store/actions\"\nimport { createQueryParamModalHelpers } from \"./shared/utils/queryParamModal\"\nimport pubsub from \"sweet-pubsub\"\nimport { AuthenticationContext } from \"./services/authentication.service\"\nimport CreateRecord from \"./pages/Records/Create\"\n\nconst HomePage = React.lazy(() => import(\"./pages/Home\"))\nconst NavbarLeft = React.lazy(() => import(\"./layout/NavbarLeft\"))\nconst Sidebar = React.lazy(() => import(\"./layout/Sidebar\"))\nconst Notifications = React.lazy(() => import(\"./layout/Notifications\"))\nconst Settings = React.lazy(() => import(\"./layout/Settings\"))\nconst Profile = React.lazy(() => import(\"./pages/Profile\"))\nconst Motivation = React.lazy(() => import(\"./pages/Profile/Motivation\"))\nconst Employees = React.lazy(() => import(\"./pages/Employees\"))\nconst CustomerCreate = React.lazy(() => import(\"./pages/Customer/Create\"))\nconst CustomerCreateForm = React.lazy(() => import(\"./pages/Customer/Create/CustomerCreateForm\"))\nconst CustomerDetail = React.lazy(() => import(\"./pages/Customer/Detail\"))\n\nconst App = () => {\n  const { pathname } = useLocation()\n\n  const notificationsModalHelpers = createQueryParamModalHelpers(\n    \"notifications\"\n  )\n  const settingsModalHelpers = createQueryParamModalHelpers(\"settings\")\n\n  const { dispatch, loggedIn: isAuthenticated } = useContext(\n    AuthenticationContext\n  )\n  const [{ data }, fetchUser] = useApi.get(\"/auth/current/\")\n  useEffect(() => {\n    if (isAuthenticated) {\n      fetchUser()\n      pubsub.on(\"fetch-user\", fetchUser)\n    }\n    return () => {\n      pubsub.off(\"fetch-user\", fetchUser)\n    }\n  }, []) // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(() => {\n    dispatch(authenticationActions.fetchUser(data))\n  }, [data]) // eslint-disable-line react-hooks/exhaustive-deps\n\n  if (!isAuthenticated) return <Redirect to={`/login?next=${pathname}`} />\n\n  if (!data) return <PageLoader />\n\n  return (\n    <ProjectPage id=\"container\">\n      <NavbarLeft\n        notificationsModalOpen={notificationsModalHelpers.open}\n        settingsModalOpen={settingsModalHelpers.open}\n      />\n      <Sidebar />\n\n      {notificationsModalHelpers.isOpen() && (\n        <Modal\n          isOpen\n          testid=\"modal:notifications\"\n          variant=\"aside\"\n          width={600}\n          onClose={notificationsModalHelpers.close}\n          renderContent={({ $scrollOverlayRef, $clickableOverlayRef }) => (\n            <Notifications\n              $scrollOverlayRef={$scrollOverlayRef}\n              $clickableOverlayRef={$clickableOverlayRef}\n            />\n          )}\n        />\n      )}\n\n      {settingsModalHelpers.isOpen() && (\n        <Modal\n          isOpen\n          testid=\"modal:settings\"\n          width={1200}\n          withCloseIcon={true}\n          onClose={settingsModalHelpers.close}\n          renderContent={modal => <Settings modalClose={modal.close} />}\n        />\n      )}\n      <React.Suspense fallback={<PageLoader />}>\n        <Switch>\n          <Route path=\"/home\" render={() => <HomePage />} />\n          <Route path=\"/dashboard\" render={() => <div />} />\n          <Route path=\"/customers\" exact render={() => <CustomerCreate />} />\n          <Route path=\"/customers/:customerId\" exact render={() => <CustomerDetail />} />\n          <Route path=\"/customers/create/:phoneNumber\" exact render={() => <CustomerCreateForm />} />\n          <Route path=\"/records/create/:customerId\" exact render={() => <CreateRecord />} />\n          <Route\n            path=\"/employees/:employeeId/motivations\"\n            exact\n            render={() => <Motivation />}\n          />\n          <Route path=\"/employees/:employeeId\" exact render={() => <Profile />} />\n          <Route path=\"/employees\" exact render={() => <Employees />} />\n          <Redirect to=\"/home\" />\n        </Switch>\n      </React.Suspense>\n    </ProjectPage>\n  )\n}\n\nexport default App\n"],"sourceRoot":""}