(this["webpackJsonpink-crm"]=this["webpackJsonpink-crm"]||[]).push([[10],{121:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return m}));var a=n(2),r=n(3);function i(){var e=Object(a.a)(["\n  display: grid;\n  grid-template-columns: 2fr 4fr 2fr;\n"]);return i=function(){return e},e}function c(){var e=Object(a.a)(["\n  grid-column-start: 2;\n  display: grid;\n  grid-template-columns: 4fr 2fr;\n  gap: 25px;\n  align-items: center;\n"]);return c=function(){return e},e}function u(){var e=Object(a.a)(["\n  display: grid;\n  grid-template-columns: 1fr 4fr 1fr;\n  height: 100%;\n"]);return u=function(){return e},e}var l=r.c.div(u()),o=r.c.form(c()),m=r.c.div(i())},164:function(e,t,n){"use strict";n.r(t);var a=n(38),r=n.n(a),i=n(20),c=n(112),u=n(5),l=n(0),o=n.n(l),m=n(27),s=n(110),d=n(31),f=n(109),b=n(121),p=n(57),h=n(10),v=n.n(h),g=n(21),E=n(115),j=n(59);t.default=function(){var e=Object(m.h)().phoneNumber,t=Object(E.a)(),n=f.a.get("/phone/".concat(e,"/"),{},{mountFetch:!0}),a=Object(u.a)(n,1)[0].data;Object(l.useEffect)((function(){a&&a.customer&&j.a.push("/customers/".concat(a.customer))}),[a]);var h=f.a.get("/types/find-outs/",{},{mountFetch:!0}),O=Object(u.a)(h,1)[0].data,_=f.a.post("/customers/"),y=Object(u.a)(_,2),k=y[0].isCreating,F=y[1],x=Object(l.useMemo)((function(){return(O||[]).map((function(e){return{label:e.name,value:e.id}}))}),[O]);return o.a.createElement(b.b,null,o.a.createElement(p.a,{validations:{full_name:p.a.is.required(),email:p.a.is.email(),find_out:p.a.is.required()},initialValues:{full_name:"",email:"",find_out:"",birth_date:v()(),note:""},onSubmit:function(){var n=Object(c.a)(r.a.mark((function n(a,c){var u;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(a),n.prev=1,n.next=4,F(Object(i.a)({},a,{phone:e,created_by:t.id,birth_date:Object(g.a)(a.birth_date,"YYYY-MM-DD")}));case 4:return u=n.sent,n.next=7,j.a.push("/customers/".concat(u.id));case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),p.a.handleAPIError(n.t0,c);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e,t){return n.apply(this,arguments)}}()},o.a.createElement(s.e,{style:{gridColumn:"2"}},o.a.createElement(s.f,null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u0430"),a&&o.a.createElement(d.a,{icon:"phone",disabled:!0,value:a.number}),o.a.createElement(p.a.Field.Input,{name:"full_name",label:"\u0424\u0418\u041e"}),o.a.createElement(p.a.Field.Input,{name:"email",label:"Email",type:"email"}),o.a.createElement(p.a.Field.Select,{name:"find_out",label:"\u041e\u0442\u043a\u0443\u0434\u0430 \u0443\u0437\u043d\u0430\u043b?",options:x}),o.a.createElement(p.a.Field.DatePicker,{name:"birth_date",label:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",withTime:!1}),o.a.createElement(p.a.Field.Textarea,{name:"note",label:"\u0417\u0430\u043c\u0435\u0442\u043a\u0430"}),o.a.createElement(s.b,null,o.a.createElement(s.a,{type:"submit",variant:"primary",isWorking:k},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))}}}]);
//# sourceMappingURL=10.50d61db4.chunk.js.map